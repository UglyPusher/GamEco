Меморандум: Караваны и банды как экономические агенты
1. Общая структура

Караваны и банды — подвижные экономические агенты, наследуются от общего базового класса MobileEconomicEntity.

Они имеют одинаковую структуру: внутреннее хранилище ресурсов, состав работников, маршруты, возможность регистрации в селах.

2. Поведение

Поведение реализуется через паттерн "Стратегия".

В зависимости от внедренной стратегии агент ведет себя как караван (торговля, перемещение, регистрация в селах, расформирование) или как банда (поиск целей для ограбления, атаки, скрытное перемещение).

В любой момент агент может сменить поведение (например, караван может стать бандой и наоборот), подменяя стратегию.

3. Хранение в глобальной экономике

Все мобильные агенты (и караваны, и банды) хранятся в едином контейнере.

Отдельные контейнеры для караванов и банд не используются, так как разница только в поведении, а не в типе объекта.

4. Преимущества подхода с одной структурой и стратегией

Унификация кода и уменьшение дублирования.

Гибкость смены поведения "на лету".

Проще масштабировать и расширять логику поведения.

5. Возможные сценарии

Караван выходит из села, движется к другому селу, регистрируется, продает и покупает товары, возвращается и расформировывается.

Банда выходит из села, совершает нападение на караван или другие цели, может сменить село, реализовать сложные сценарии грабежа.

Караван и банда могут взаимодействовать (например, банда грабит караван).

6. Особенности реализации

Внутренние данные (хранилище, состав работников и т.п.) инкапсулированы в MobileEconomicEntity.

Поведенческая логика делегируется соответствующим стратегиям.

Смена стратегии происходит через интерфейс поведения без изменений внешнего интерфейса агента.

